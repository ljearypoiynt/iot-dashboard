# This secret is managed as a Sealed Secret in git at: k8s/cloudflare-tunnel-sealed-secret.yaml
# Sealed Secrets encrypts this with the cluster's public key, so it's safe to commit to git.
# The sealing controller decrypts it at runtime.
# 
# This template is only used if you want to override the sealed secret with plain values.
# For production, use the sealed secret instead.

{{- if .Values.cloudflare.credentialsOverride }}
apiVersion: v1
kind: Secret
metadata:
  name: cloudflare-tunnel-credentials
  namespace: {{ .Values.namespace }}
type: Opaque
stringData:
  credentials.json: |
    {{ .Values.cloudflare.credentials | toPrettyJson | nindent 4 }}
{{- end }}
